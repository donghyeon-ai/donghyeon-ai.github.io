{{- $pages := .Page.Pages -}}
{{- if not $pages -}}
  {{ errorf "No pages found under %q" .Page.File.Path }}
{{- end -}}

<ul class="toc-list">
  {{- range $pages.ByWeight -}}
    <li>
      <h3><a href="{{ .RelPermalink }}">{{ .Title }}</a></h3>
      {{- with .Params.summary -}}
        <p>{{ . }}</p>
      {{- else -}}
        <p>{{ .Summary }}</p>
      {{- end -}}
    </li>
  {{- end -}}
</ul>